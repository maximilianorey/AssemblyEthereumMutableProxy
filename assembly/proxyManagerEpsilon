0x61 // PUSH2 <S>CODE LENGTH<S>
0x60 // PUSH1
0x00 // 0
0x81 // DUP2 (CODELENGTH)
0x61 // PUSH1 <S>CONSTRUCTOR LENGTH<S>
0x82 // DUP3 (0) (dstOffset)
0x39 // CODECOPY

0x30 // address(this)
0x61 // PUSH1 <S>body.proxy+body.proxy.PROXY_MANAGER_ADDRESS<S>
0x52 // MSTORE

0xF3 // RETURN
END CONSTRUCTOR

0x34 // CALLVALUE
0x61 // <S>ERROR: NOT PAYMENT ALLOWED<S>
0x57 // JUMPI
0x36 // CALLDATASIZE
0x60 // PUSH1 <S>NO CALLBACK<S>
0x57 // JUMPI
0x33 // CALLER
0x54 // SLOAD (CALLER'S ADMIN)
0x60 // PUSH1 (MEM OFFSETT)
0x00 // 0
0x52 // MSTORE
0x60 // PUSH1 (RET LENGTH)
0x20 // 32
0x60 // PUSH1 (RET OFFSETT)
0x00 // 0
0xF3 // RETURN
0x5B // JUMPDST <D>NO CALLBACK<D>
0x60 // PUSH1
0x00 // 0
0x35 // CALDATALOAD
0x60
0xE0 // PUSH 224
0x1C // SHR

0x80 // DUP1 (FUNCTION HASH)
0x63 // PUSH4
0x15 // HASH(getImplementation(address))
0xac
0x72
0xca 
0x14 // EQ
0x61 // PUSH1 <S>getImplementation(address) Function<S>
0x57 // JUMPI

0x80 // DUP1 (FUNCTION HASH)
0x63 // PUSH4
0x64 // HASH (getAdmin(address))
0xef
0xb2
0x2b
0x14 // EQ
0x60 // PUSH1 <S>getAdmin(address) Function<S>
0x57 // JUMPI

0x80 // DUP1 (FUNCTION HASH)
0x63 // PUSH4
0x13 // HASH(upgradeTo(address,address))
0x2d
0x80
0x7e 
0x14 // EQ
0x61 // PUSH1 <S>upgradeTo(address,address) Function<S>
0x57 // JUMPI

0x80 // DUP1 (FUNCTION HASH)
0x63 // PUSH4
0x1a // HASH (changeAdmin(address,address))
0xcf
0xd0
0x2a
0x14 // EQ
0x60 // PUSH1 <S>changeAdmin(address,address) Function<S>
0x57 // JUMPI

0x63 // PUSH4
0x0a // HASH (deployProxy(address,address))
0x6e
0xaf
0xdd
0x03 // SUB
0x61 // PUSH2 <S>FUNCTION NOT FOUND<S>
0x57 // JUMPI

0x61 // <S>proxy.LENGTH<S>

0x80 // DUP1 (proxy.LENGTH)
0x61 // <S>proxy<S>


0x60 // PUSH1
0x00 // 0
0x39 // CODECOPY
0x60 // PUSH1
0x24 // 34
0x35 // CALDATALOAD (PROXY IMPL)
0x61 // PUSH1 <S>proxy.IMPL<S>
0x52 // MSTORE

0x60 // PUSH1 (value)
0x00 // 0
0x80 // DUP1 (0) (offset)
0xF0 // CREATE (NEW PROXY ADDR)

0x60 // PUSH1
0x04 // 4
0x35 // CALDATALOAD (PROXY ADMIN)

0x80 // DUP1 (PROXY ADMIN)
0x60 // PUSH1
0x00 // 0
0x52 // MSTORE

0x81 // DUP2 (NEW PROXY ADDR)

0x55 // SSTORE
0x80 // DUP1 (NEW PROXY ADDR)

0x60 // PUSH1
0x24 // 36
0x35 // CALDATALOAD (PROXY IMPL)

0x81 // DUP2 (NEW PROXY ADDR)
0x74 // PUSH21
0x01 // MASK
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x17 // OR
0x55 SSTORE

0x60 // PUSH1
0x04 // 4
0x35 // CALDATALOAD (PROXY ADMIN)

0x60 // PUSH1
0x24 // 36
0x35 // CALDATALOAD (PROXY IMPL)
0x91 // SWAP2

0x7F
0x4f // NewProxy(address,address,address)
0x62
0x83
0x0b
0xd0
0xf7
0xf1
0xb8
0xfd
0x40
0x49
0xdb
0xe9
0x71
0x71
0x8c
0xf9
0xfc
0x61
0xea
0xc3
0x40
0x94
0xaf
0x47
0x4e
0xb1
0x74
0x06
0x28
0x9a
0x18

0x60 // PUSH1
0x00 // 0
0x80 // DUP1 (0)
0xA4 // LOG4

0x60 // PUSH1
0x00 // 0
0x52 // MSTORE

0x60 // PUSH1 
0x20 // 32
0x60 // PUSH1 
0x00 // 0
0xF3 // RETURN

0x5B // JUMPDST <D>getAdmin(address) Function<D>
0x60 // PUSH1
0x04 // 4
0x35 // CALDATALOAD
0x54 // SLOAD (CONTRACT'S ADMIN)
0x60 // PUSH1 (MEM OFFSETT)
0x00 // 0
0x52 // MSTORE
0x60 // PUSH1 (RET LENGTH)
0x20 // 32
0x60 // PUSH1 (RET OFFSETT)
0x00 // 0
0xF3 // RETURN

0x5B // JUMPDST <D>changeAdmin(address,address) Function<D>
0x60 // PUSH1
0x24 // 34
0x35 // CALDATALOAD (NEW ADMIN ADDR) (SSTORE VALUE)

0x80 // DUP1 (CONTRACT ADDR)
0x60 // PUSH1
0x20 // 32
0x52 // MSTORE

0x60 // PUSH1
0x04 // 4
0x35 // CALDATALOAD (CONTRACT ADDR) (SSTORE KEY)
0x80 // DUP1 (CONTRACT ADDR)

0x54 // SLOAD (ACTUAL ADMIN)
0x80 // DUP1 (ACTUAL ADMIN)
0x61 // <S>changeAdmin - Proxy is registered<S>
0x57 // JUMPI
<ERROR>Proxy not registered.
0x5B // JUMPDST <D>changeAdmin - Proxy is registered<D>
0x33 // SENDER
0x03 // SUB
0x61 // PUSH1 <S>Caller is not the actual admin<S>
0x57 // JUMPI

0x55 // SSTORE

0x33 // SENDER
0x60 // PUSH1
0x00 // 0
0x52 // MSTORE

0x60 // PUSH1
0x04 // 4
0x35 // CALDATALOAD (CONTRACT ADDR)

0x7F // PUSH32
0x4e // AdminChanged
0xb5
0x72
0xe9
0x91
0x96
0xbe
0xd0
0x27
0x0f
0xbd
0x5b
0x17
0xa9
0x48
0xe1
0x9c
0x3f
0x50
0xa9
0x78
0x38
0xcb
0x0d
0x2a
0x75
0xa8
0x23
0xff
0x8e
0x6c
0x50
0x60 // PUSH1
0x40 // 64
0x60 // PUSH1
0x00 
0xA2 // LOG2
0x00 // STOP

0x5B <D>getImplementation(address) Function<D>
0x60 // PUSH1
0x04 // 4
0x35 // CALDATALOAD (CONTRACT ADDR)
0x74 // PUSH21
0x01 // MASK
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x17 // OR
0x54 // SLOAD (ACTUAL IMPLEMENTATION)

0x60 // PUSH1
0x00 // 0
0x52 // MSTORE

0x60 // PUSH1 
0x20 // 32
0x60 // PUSH1 
0x00 // 0
0xF3 // RETURN

0x5B <D>upgradeTo(address,address) Function<D>

0x60 // PUSH1
0x04 // 4
0x35 // CALDATALOAD (CONTRACT ADDR) (SSTORE KEY)
0x54 // SLOAD (ACTUAL ADMIN)
0x33 // SENDER
0x03 // SUB
0x61 // <S>Caller is not the actual admin<S>
0x57 // JUMPI

0x60 // PUSH1
0x24 // 36
0x35 // CALDATALOAD (NEW IMPLEMENTATION)

0x60 // PUSH1
0x04 // 4
0x35 // CALDATALOAD (CONTRACT ADDR)
0x74 // PUSH21
0x01 // MASK
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x00
0x17 // OR
0x55 // SSTORE

0x60 // PUSH1
0x24 // 36
0x35 // CALDATALOAD (NEW IMPLEMENTATION)

0x80 // DUP1(NEW IMPLEMENTATION ADDRESS) --BEGIN "IS CONTRACT"
0x3B // EXTCODESIZE
0x61 // PUSH2 <S>UPGRADETO FUNCTION - OK<S>
0x57 // JUMPI
<ERROR>ERC1967: new implementation is not a contract
0x5B // JUMPDEST <D>UPGRADETO FUNCTION - OK<D> -- END  "IS CONTRACT"

0x60
0x00 // MEMOFFSET
0x52 // MSTORE

0x60
0x00 //retLength
0x80 // DUP1(retOffset)
0x60
0x20 // argsLength (32)
0x81 //DUP2 (0) (argsOffset)
0x80 //DUP1 (0) (value)
0x60 // PUSH1
0x04 // 4
0x35 // CALDATALOAD (CONTRACT ADDR)
0x5A // GAS (gas)
0xF1 // CALL

0x60 // PUSH1
0x24 // 36
0x35 // CALDATALOAD (NEW IMPLEMENTATION)

0x60 // PUSH1
0x04 // 4
0x35 // CALDATALOAD (CONTRACT ADDR)

0x7F
0x5d
0x61
0x1f
0x31
0x86
0x80
0xd0
0x05
0x98
0xbb
0x73
0x5d
0x61
0xba
0xcf
0x0c
0x51
0x4c
0x6b
0x50
0xe1
0xe5
0xad
0x30
0x04
0x0a
0x4d
0xf2
0xb1
0x27
0x91
0xc7

0x60 // PUSH1
0x00
0x80 // DUP1(0) 
0xA3 // LOG3
0x00 //STOP


0x5B // JUMPDST <D>Caller is not the actual admin<D>
<ERROR>Caller is not the actual admin.
0x5B // JUMPDST <D>FUNCTION NOT FOUND<D>
<ERROR>FUNCTION NOT FOUND.
0x5B // JUMPDST <D>ERROR: NOT PAYMENT ALLOWED<D>
<ERROR>NOT PAYMENT ALLOWED
<IMPORT>./assemblyCodeEpsilon proxy